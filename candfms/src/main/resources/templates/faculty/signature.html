<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	th:replace="faculty/blank::layout(~{::section})">
<head>

</head>
<body>
	<section>

<div class="row px-3">
<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="/faculty/index">Home</a></li>
    <li class="breadcrumb-item active" aria-current="page">SIGNATURE</li>
  </ol>
</nav>
</div>
		<!-- Begin Page Content -->
		<div class="container-fluid">
			<!-- Page Heading -->
			<div class="d-sm-flex align-items-center justify-content-between mb-4">
				
				

				
			</div>

			<div th:if="${session.message}" id="hideDiv"
				th:classappend="${session.message.type}" class="alert " role="alert">
				<p class="text-center" th:text="${session.message.content}"></p>
				<th:block th:text="${#session.removeAttribute('message')}"></th:block>
			</div>
			<!-- th:if="${!user.imageUrl.empty} or ${user.imageUrl !=null}"  or ${user.getSignature() =="1"} or ${user.getSignature() =="2"}-->
			<!-- user.getSignature().equals("0")  || user.getSignature().equals("1") || user.getSignature().equals("2")  -->
            <div class="row "  th:if="${user.signature=='0'} or ${user.signature=='1'} or ${user.signature=='2'} ">           
            <div class="col-md-10  pice">
							<h6 class="text-center">
								<b>Details of Your Uploaded signature</b>
							</h6>
							<div class="row">
							<div class="col-md-4">
							<p>-Image size <span th:text="${siz}" class="badge badge-info"></span></p>
							</div>
							
							<div class="col-md-4">
							<p>-image dimension <span th:text="${diame}" class="badge badge-info"></span></p>
							</div>
							<div class="col-md-4">
							<p>-Image extension/item type <span th:text="${exten}" class="badge badge-info"></span></p>
							</div>						
							</div>																											
			</div>          
            </div>

			<!-- Content Row -->
			<div class="row ">
				<!-- Signature -->



				<!--   th:action="@{/faculty/process-user}" -->
				<div class="col-md-8 text-center " th:if="${user.signature.empty}">


					<h1 class="text-center">Upload Signature</h1>
					<form action="#" th:object="${user}" enctype="multipart/form-data"
						method="POST" th:action="@{/faculty/process-user}" class="mt-2">



						<div class="row">
							<div class="col-md-12">
								<div class="form-group">

									<div class="preview-zone d-none">
										<div class="box box-solid">
											<div class="box-header with-border">
												<div>
													<b>Preview</b>
												</div>
												<div class="box-tools pull-right">
													<button type="button"
														class="btn btn-danger btn-sm remove-preview">
														<i class="fa fa-times"></i> Reset The Field
													</button>
												</div>
											</div>
											<div class="box-body"></div>
										</div>
									</div>
									<div class="dropzone-wrapper">
										<div class="dropzone-desc">
											<i class="fas fa-cloud-upload-alt fa-3x"></i>
											<p>Choose an image png file or drag it here.</p>
										</div>
										<input type="file" name="profileImage" accept="image/png"
											class="dropzone">
									</div>
								</div>
							</div>
							
						</div>

						<div class="row ">
							<button class="btn btn-outline-primary btn-sm ">
								<i class="fas fa-save"></i> Save Signature
							</button>
						</div>


					</form>


				</div>






				<div class="col-md-8 text-center " th:if="${user.signature}==0">

					<br />
					<br />
					<div style="text-align: center">
						<img th:src="@{/img/processing.gif}" height="50%" width="50%"
							style="margin-left: 0px;">
						<!-- style="width: 100%; height: 100px"-->

					</div>
				</div>
				
				<div class="col-md-8 text-center " th:if="${user.signature}==1">

					
					<br />
					<div style="text-align: center">
						<img th:src="@{/img/accepted.png}" height="25%" width="25%"
							style="margin-left: 0px;">
						<h5><b> Now you can use your signature</b></h5>	
							
						<!-- style="width: 100%; height: 100px"-->

					</div>
				</div>
				
				<div class="col-md-8 text-center " th:if="${user.signature}==2">

				<br />
					<br />
					<div style="text-align: center">
						<img th:src="@{/img/Denied.png}" height="50%" width="50%"
							style="margin-left: 0px;">
							
					</div>
					<h5><b> please delete old uploaded signature and upload valid or acceptable format signature</b></h5>	
				</div>






































				<div class="col-md-3  pice" th:if="${user.signature}==0 or ${user.signature}==2">
					<div class="row">
						<div class="col-md-12  pice">


							<h4 class="text-center">
								<b>Applicable Signature</b>
							</h4>
							<a id="photoButton" th:href="@{'/signatu/'+${user.imageUrl}}">
								<img class="img-thumbnail rounded hover-shadow " src=""
								th:src="@{'/signatu/'+${user.imageUrl}}"
								alt=" Signature image Null Plase Upload"
								style="width: 100%; height: 100px" />

							</a>
						</div>

					</div>
					<br />
					<div class="row">
						<div class="col-md-12 "    th:if="${!user.imageUrl.empty}">
							<a th:onclick="|deleteSignature(${user.id})|"
								class="btn btn-danger btn-sm btn-block" id="deleteSignature"><i
								class="fas fa-trash"></i> Delete</a>

						</div>
					</div>
					<div class="row"></div>

					<div class="row">

						<div class="col-md-6"></div>

					</div>
				</div>





                    <div class="col-md-3  pice" th:if="${user.signature}==1">
					<div class="row">
						<div class="col-md-12  pice">


							<h4 class="text-center">
								<b>Applicable Signature</b>
							</h4>
							<a id="photoButton" th:href="@{'/signatu/'+${user.imageUrl}}">
								<img class="img-thumbnail rounded hover-shadow " src=""
								th:src="@{'/signatu/'+${user.imageUrl}}"
								alt=" Signature image Null Plase Upload"
								style="width: 100%; height: 100px" />

							</a>
						</div>

					</div>
					<br />
					<div class="row text-center">
						<div class="col-md-12 text-center" >
							<button type="button" class="btn btn-primary btn-sm btn-block" >Active</button>

						</div>
					</div>
					
				</div>
				
				
				
				 <div class="col-md-3  pice" th:if="${user.signature.empty}">
					<div class="row">
						<div class="col-md-12  pice">
							<h6 class="text-center">
								<b>Details of valid or acceptable format signature</b>
							</h6>
							<p>--file extension/item type only .png(to LowerCase)</p>
							<p>--image dimension only 200x80</p>
							<p>--size max 1mb</p>
							<p>--background transparent or white color</p>
						</div>

					</div>
					<br />
					<div class="row text-center">
						<div class="col-md-12 text-center" >
							<a type="button" th:href="@{'/faculty/download'}" class="btn btn-primary btn-sm btn-block" >
							<i class="fas fa-download fa-sm text-white-50"></i> Download Sample PNG</a>

						</div>
					</div>
					
				</div>
				
				
				
				

			</div>

			<hr />

			<br />


















		</div>



		<div class="modal fade" id="photoModal" tabindex="-1" role="dialog">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">Active Signature</h5>
						<button type="button" class="close" data-dismiss="modal"
							aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<img id="userPhoto" src="" width="100%" height="100%">
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary"
							data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>



		<script>
			function readFile(input) {
				if (input.files && input.files[0]) {
					var reader = new FileReader();

					reader.onload = function(e) {
						var htmlPreview = '<img width="200" src="' + e.target.result + '" />'
								+ '<p>' + input.files[0].name + '</p>';
						var wrapperZone = $(input).parent();
						var previewZone = $(input).parent().parent().find(
								'.preview-zone');
						var boxZone = $(input).parent().parent().find(
								'.preview-zone').find('.box').find('.box-body');

						wrapperZone.removeClass('dragover');
						previewZone.removeClass('d-none');
						boxZone.empty();
						boxZone.append(htmlPreview);
					};

					reader.readAsDataURL(input.files[0]);
				}
			}

			function reset(e) {
				e.wrap('<form>').closest('form').get(0).reset();
				e.unwrap();
			}

			$(".dropzone").change(function() {
				readFile(this);
			});

			$('.dropzone-wrapper').on('dragover', function(e) {
				e.preventDefault();
				e.stopPropagation();
				$(this).addClass('dragover');
			});

			$('.dropzone-wrapper').on('dragleave', function(e) {
				e.preventDefault();
				e.stopPropagation();
				$(this).removeClass('dragover');
			});

			$('.remove-preview').on(
					'click',
					function() {
						var boxZone = $(this).parents('.preview-zone').find(
								'.box-body');
						var previewZone = $(this).parents('.preview-zone');
						var dropzone = $(this).parents('.form-group').find(
								'.dropzone');
						boxZone.empty();
						previewZone.addClass('d-none');
						reset(dropzone);
					});
		</script>




		<script>
			// Add the following code if you want the name of the file appear on select
			$(".custom-file-input").on(
					"change",
					function() {
						var fileName = $(this).val().split("\\").pop();
						$(this).siblings(".custom-file-label").addClass(
								"selected").html(fileName);
					});
		</script>
		<!-- /.container-fluid -->


		<script>
       function deleteSignature(cid){
    	   swal({
    		   title: "Are you sure?",
    		   text: "Once deleted, you will not be able to recover this imaginary file!",
    		   icon: "warning",
    		   buttons: true,
    		   dangerMode: true,
    		 })
    		 .then((willDelete) => {
    		   if (willDelete) {
    		      window.location="/faculty/deletesig/"+cid;
    		   } else {
    		     swal("Your imaginary file is safe!");
    		   }
    		 });
       }
    </script>


	</section>
</body>
</html>